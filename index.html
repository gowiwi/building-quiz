[
  {
    "old_string": "        // 10å•ã‚»ãƒƒãƒˆç”¨ã®å¤‰æ•°\n        let currentQuestionNumber = 0;\n        let totalQuestions = 10;\n        let gameActive = false;\n        let sessionCorrect = 0;\n        let sessionWrong = 0;",
    "new_string": "        // 10å•ã‚»ãƒƒãƒˆç”¨ã®å¤‰æ•°\n        let currentQuestionNumber = 0;\n        let totalQuestions = 10;\n        let gameActive = false;\n        let sessionCorrect = 0;\n        let sessionWrong = 0;\n        let gameStartTime = 0;\n        let totalGameTime = 0;\n        \n        // è¨€èªè¨­å®š\n        let currentLanguage = 'ja';\n        \n        // å¤šè¨€èªå¯¾å¿œãƒ†ã‚­ã‚¹ãƒˆ\n        const translations = {\n            ja: {\n                title: 'ğŸ—ï¸ å»ºç¯‰ç•ªä»˜ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ ',\n                instructions: '<strong>éŠã³æ–¹ï¼š</strong><br>è¡¨ç¤ºã•ã‚ŒãŸåº§æ¨™ï¼ˆä¾‹ï¼šã€Œã„3ã€ï¼‰ãŒã‚°ãƒªãƒƒãƒ‰ã®ã©ã“ã«ã‚ã‚‹ã‹ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚<br>æ¨ªè»¸ï¼šã„ã‚ã¯ã«ã»ã¸ã¨ã¡ã‚Šã¬ã‚‹ã‚’â€¦ï¼ˆã„ã‚ã¯æ­Œï¼‰<br>ç¸¦è»¸ï¼š1, 2, 3, 4, 5â€¦',\n                difficultyTitle: 'ğŸ¯ é›£æ˜“åº¦é¸æŠ',\n                timerTitle: 'â±ï¸ ã‚¿ã‚¤ãƒãƒ¼',\n                correct: 'æ­£è§£',\n                wrong: 'ä¸æ­£è§£',\n                rate: 'æ­£è§£ç‡',\n                question: 'ã€Œã‚²ãƒ¼ãƒ é–‹å§‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦10å•ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼',\n                whereIs: 'ã¯ã©ã“ï¼Ÿ',\n                startGame: 'ã‚²ãƒ¼ãƒ é–‹å§‹',\n                nextQuestion: 'æ¬¡ã®å•é¡Œ',\n                resetScore: 'ã‚¹ã‚³ã‚¢ãƒªã‚»ãƒƒãƒˆ',\n                gameComplete: 'ğŸ‰ ã‚²ãƒ¼ãƒ çµ‚äº†ï¼',\n                totalTime: 'å®Œäº†æ™‚é–“',\n                seconds: 'ç§’',\n                questions: 'å•',\n                close: 'é–‰ã˜ã‚‹',\n                playAgain: 'ã‚‚ã†ä¸€åº¦',\n                correctAnswer: 'âœ… æ­£è§£ã§ã™ï¼',\n                wrongAnswer: 'âŒ ä¸æ­£è§£ã§ã™ã€‚æ­£è§£ã¯ã€Œ',\n                wrongAnswerEnd: 'ã€ã§ã™ã€‚',\n                timeUp: 'â° æ™‚é–“åˆ‡ã‚Œã§ã™ï¼æ­£è§£ã¯ã€Œ',\n                timeUpEnd: 'ã€ã§ã—ãŸã€‚',\n                startGameFirst: 'ã¾ãšã€Œã‚²ãƒ¼ãƒ é–‹å§‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼',\n                easy: 'åˆç´š',\n                normal: 'ä¸­ç´š',\n                hard: 'ä¸Šç´š',\n                expert: 'è¶…ç´š',\n                easyInfo: 'ã‚°ãƒªãƒƒãƒ‰: 10Ã—10, åˆ¶é™æ™‚é–“: ãªã—',\n                normalInfo: 'ã‚°ãƒªãƒƒãƒ‰: 15Ã—15, åˆ¶é™æ™‚é–“: 15ç§’',\n                hardInfo: 'ã‚°ãƒªãƒƒãƒ‰: 20Ã—20, åˆ¶é™æ™‚é–“: 10ç§’',\n                expertInfo: 'ã‚°ãƒªãƒƒãƒ‰: 20Ã—20, åˆ¶é™æ™‚é–“: 5ç§’',\n                perfect: 'ğŸ† ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆï¼ç´ æ™´ã‚‰ã—ã„ï¼',\n                great: 'ğŸŒŸ ã™ã”ã„ï¼ã‚ˆãã§ãã¾ã—ãŸï¼',\n                good: 'ğŸ‘ ã„ã„æ„Ÿã˜ã§ã™ï¼',\n                notBad: 'ğŸ’ª ã‚‚ã†å°‘ã—ï¼é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼',\n                practice: 'ğŸ“š ç·´ç¿’ã‚ã‚‹ã®ã¿ï¼'\n            },\n            en: {\n                title: 'ğŸ—ï¸ Construction Grid Quiz Game',\n                instructions: '<strong>How to Play:</strong><br>Click on the grid cell matching the displayed coordinates (e.g., \"ã„3\").<br>Horizontal: Iroha characters (Japanese alphabet)<br>Vertical: 1, 2, 3, 4, 5â€¦',\n                difficultyTitle: 'ğŸ¯ Difficulty',\n                timerTitle: 'â±ï¸ Timer',\n                correct: 'Correct',\n                wrong: 'Wrong',\n                rate: 'Accuracy',\n                question: 'Click \"Start Game\" for 10-question challenge!',\n                whereIs: ' - Where is it?',\n                startGame: 'Start Game',\n                nextQuestion: 'Next Question',\n                resetScore: 'Reset Score',\n                gameComplete: 'ğŸ‰ Game Complete!',\n                totalTime: 'Total Time',\n                seconds: 'sec',\n                questions: ' questions',\n                close: 'Close',\n                playAgain: 'Play Again',\n                correctAnswer: 'âœ… Correct!',\n                wrongAnswer: 'âŒ Wrong. The answer is \"',\n                wrongAnswerEnd: '\".',\n                timeUp: 'â° Time\\'s up! The answer was \"',\n                timeUpEnd: '\".',\n                startGameFirst: 'Please click \"Start Game\" first!',\n                easy: 'Easy',\n                normal: 'Normal',\n                hard: 'Hard',\n                expert: 'Expert',\n                easyInfo: 'Grid: 10Ã—10, Time limit: None',\n                normalInfo: 'Grid: 15Ã—15, Time limit: 15 sec',\n                hardInfo: 'Grid: 20Ã—20, Time limit: 10 sec',\n                expertInfo: 'Grid: 20Ã—20, Time limit: 5 sec',\n                perfect: 'ğŸ† Perfect! Outstanding!',\n                great: 'ğŸŒŸ Great! Well done!',\n                good: 'ğŸ‘ Good job!',\n                notBad: 'ğŸ’ª Not bad! Keep trying!',\n                practice: 'ğŸ“š Practice makes perfect!'\n            }\n        };"
  },
  {
    "old_string": "    <title>å»ºç¯‰ç•ªä»˜ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ </title>",
    "new_string": "    <title id=\"pageTitle\">å»ºç¯‰ç•ªä»˜ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ </title>"
  },
  {
    "old_string": "        .difficulty-info {\n            font-size: 0.9em;\n            color: #666;\n            margin-top: 5px;\n        }",
    "new_string": "        .difficulty-info {\n            font-size: 0.9em;\n            color: #666;\n            margin-top: 5px;\n        }\n\n        .language-selector {\n            position: absolute;\n            top: 20px;\n            right: 20px;\n            display: flex;\n            gap: 5px;\n            z-index: 100;\n        }\n\n        @media (max-width: 768px) {\n            .language-selector {\n                top: 10px;\n                right: 10px;\n            }\n        }\n\n        .lang-btn {\n            padding: 8px 15px;\n            font-size: 0.9em;\n            border-radius: 20px;\n            border: 2px solid #3498db;\n            background: white;\n            color: #3498db;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            font-weight: bold;\n        }\n\n        .lang-btn.active {\n            background: #3498db;\n            color: white;\n        }\n\n        .lang-btn:hover {\n            transform: translateY(-1px);\n            box-shadow: 0 3px 10px rgba(0,0,0,0.1);\n        }"
  },
  {
    "old_string": "<body>\n    <div class=\"container\">\n        <h1>ğŸ—ï¸ å»ºç¯‰ç•ªä»˜ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ </h1>",
    "new_string": "<body>\n    <!-- è¨€èªé¸æŠãƒœã‚¿ãƒ³ -->\n    <div class=\"language-selector\">\n        <button class=\"lang-btn active\" onclick=\"switchLanguage('ja')\">æ—¥æœ¬èª</button>\n        <button class=\"lang-btn\" onclick=\"switchLanguage('en')\">English</button>\n    </div>\n\n    <div class=\"container\">\n        <h1 id=\"title\">ğŸ—ï¸ å»ºç¯‰ç•ªä»˜ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ </h1>"
  },
  {
    "old_string": "        <div class=\"instructions\">\n            <strong>éŠã³æ–¹ï¼š</strong><br>\n            è¡¨ç¤ºã•ã‚ŒãŸåº§æ¨™ï¼ˆä¾‹ï¼šã€Œã„3ã€ï¼‰ãŒã‚°ãƒªãƒƒãƒ‰ã®ã©ã“ã«ã‚ã‚‹ã‹ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚<br>\n            æ¨ªè»¸ï¼šã„ã‚ã¯ã«ã»ã¸ã¨ã¡ã‚Šã¬ã‚‹ã‚’â€¦ï¼ˆã„ã‚ã¯æ­Œï¼‰<br>\n            ç¸¦è»¸ï¼š1, 2, 3, 4, 5â€¦\n        </div>",
    "new_string": "        <div class=\"instructions\" id=\"instructions\">\n            <strong>éŠã³æ–¹ï¼š</strong><br>\n            è¡¨ç¤ºã•ã‚ŒãŸåº§æ¨™ï¼ˆä¾‹ï¼šã€Œã„3ã€ï¼‰ãŒã‚°ãƒªãƒƒãƒ‰ã®ã©ã“ã«ã‚ã‚‹ã‹ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚<br>\n            æ¨ªè»¸ï¼šã„ã‚ã¯ã«ã»ã¸ã¨ã¡ã‚Šã¬ã‚‹ã‚’â€¦ï¼ˆã„ã‚ã¯æ­Œï¼‰<br>\n            ç¸¦è»¸ï¼š1, 2, 3, 4, 5â€¦\n        </div>"
  },
  {
    "old_string": "            <div class=\"difficulty-section\">\n                <h3>ğŸ¯ é›£æ˜“åº¦é¸æŠ</h3>\n                <div class=\"difficulty-buttons\">\n                    <button class=\"difficulty-btn active\" onclick=\"setDifficulty('easy')\">åˆç´š</button>\n                    <button class=\"difficulty-btn\" onclick=\"setDifficulty('normal')\">ä¸­ç´š</button>\n                    <button class=\"difficulty-btn\" onclick=\"setDifficulty('hard')\">ä¸Šç´š</button>\n                    <button class=\"difficulty-btn\" onclick=\"setDifficulty('expert')\">è¶…ç´š</button>\n                </div>\n                <div class=\"difficulty-info\" id=\"difficultyInfo\">ã‚°ãƒªãƒƒãƒ‰: 10Ã—10, åˆ¶é™æ™‚é–“: ãªã—</div>\n            </div>\n            <div class=\"timer-section\">\n                <h3>â±ï¸ ã‚¿ã‚¤ãƒãƒ¼</h3>\n                <div class=\"timer-display\" id=\"timer\">--:--</div>\n            </div>",
    "new_string": "            <div class=\"difficulty-section\">\n                <h3 id=\"difficultyTitle\">ğŸ¯ é›£æ˜“åº¦é¸æŠ</h3>\n                <div class=\"difficulty-buttons\">\n                    <button class=\"difficulty-btn active\" onclick=\"setDifficulty('easy')\" id=\"easyBtn\">åˆç´š</button>\n                    <button class=\"difficulty-btn\" onclick=\"setDifficulty('normal')\" id=\"normalBtn\">ä¸­ç´š</button>\n                    <button class=\"difficulty-btn\" onclick=\"setDifficulty('hard')\" id=\"hardBtn\">ä¸Šç´š</button>\n                    <button class=\"difficulty-btn\" onclick=\"setDifficulty('expert')\" id=\"expertBtn\">è¶…ç´š</button>\n                </div>\n                <div class=\"difficulty-info\" id=\"difficultyInfo\">ã‚°ãƒªãƒƒãƒ‰: 10Ã—10, åˆ¶é™æ™‚é–“: ãªã—</div>\n            </div>\n            <div class=\"timer-section\">\n                <h3 id=\"timerTitle\">â±ï¸ ã‚¿ã‚¤ãƒãƒ¼</h3>\n                <div class=\"timer-display\" id=\"timer\">--:--</div>\n            </div>"
  },
  {
    "old_string": "        <div class=\"game-info\">\n            <div class=\"score\">\n                æ­£è§£: <span class=\"correct-score\" id=\"correct\">0</span>\n            </div>\n            <div class=\"score\">\n                ä¸æ­£è§£: <span class=\"wrong-score\" id=\"wrong\">0</span>\n            </div>\n            <div class=\"score\">\n                æ­£è§£ç‡: <span id=\"rate\">0%</span>\n            </div>\n        </div>",
    "new_string": "        <div class=\"game-info\">\n            <div class=\"score\">\n                <span id=\"correctLabel\">æ­£è§£</span>: <span class=\"correct-score\" id=\"correct\">0</span>\n            </div>\n            <div class=\"score\">\n                <span id=\"wrongLabel\">ä¸æ­£è§£</span>: <span class=\"wrong-score\" id=\"wrong\">0</span>\n            </div>\n            <div class=\"score\">\n                <span id=\"rateLabel\">æ­£è§£ç‡</span>: <span id=\"rate\">0%</span>\n            </div>\n        </div>"
  },
  {
    "old_string": "        <div class=\"buttons\">\n            <button id=\"startBtn\" onclick=\"startGame()\">ã‚²ãƒ¼ãƒ é–‹å§‹</button>\n            <button id=\"nextBtn\" onclick=\"nextQuestion()\" style=\"display: none;\">æ¬¡ã®å•é¡Œ</button>\n            <button onclick=\"resetScore()\">ã‚¹ã‚³ã‚¢ãƒªã‚»ãƒƒãƒˆ</button>\n        </div>",
    "new_string": "        <div class=\"buttons\">\n            <button id=\"startBtn\" onclick=\"startGame()\">ã‚²ãƒ¼ãƒ é–‹å§‹</button>\n            <button id=\"nextBtn\" onclick=\"nextQuestion()\" style=\"display: none;\">æ¬¡ã®å•é¡Œ</button>\n            <button id=\"resetBtn\" onclick=\"resetScore()\">ã‚¹ã‚³ã‚¢ãƒªã‚»ãƒƒãƒˆ</button>\n        </div>"
  },
  {
    "old_string": "        <!-- çµæœè¡¨ç¤ºãƒ¢ãƒ¼ãƒ€ãƒ« -->\n        <div id=\"resultModal\" style=\"display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;\">\n            <div style=\"background: white; padding: 30px; border-radius: 20px; max-width: 500px; width: 90%; text-align: center;\">\n                <h2 style=\"color: #333; margin-bottom: 20px;\">ğŸ‰ ã‚²ãƒ¼ãƒ çµ‚äº†ï¼</h2>\n                <div style=\"font-size: 1.5em; margin: 20px 0;\">\n                    <div style=\"color: #27ae60; margin: 10px 0;\">âœ… æ­£è§£: <span id=\"finalCorrect\">0</span>å•</div>\n                    <div style=\"color: #e74c3c; margin: 10px 0;\">âŒ ä¸æ­£è§£: <span id=\"finalWrong\">0</span>å•</div>\n                    <div style=\"font-size: 2em; font-weight: bold; color: #3498db; margin: 20px 0;\">\n                        æ­£è§£ç‡: <span id=\"finalRate\">0</span>%\n                    </div>\n                </div>\n                <div id=\"resultMessage\" style=\"font-size: 1.3em; font-weight: bold; margin: 20px 0;\"></div>\n                <button onclick=\"closeResult()\" style=\"background: #3498db; color: white; border: none; padding: 15px 30px; font-size: 1.2em; border-radius: 25px; cursor: pointer; margin: 10px;\">é–‰ã˜ã‚‹</button>\n                <button onclick=\"restartGame()\" style=\"background: #27ae60; color: white; border: none; padding: 15px 30px; font-size: 1.2em; border-radius: 25px; cursor: pointer; margin: 10px;\">ã‚‚ã†ä¸€åº¦</button>\n            </div>\n        </div>",
    "new_string": "        <!-- çµæœè¡¨ç¤ºãƒ¢ãƒ¼ãƒ€ãƒ« -->\n        <div id=\"resultModal\" style=\"display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;\">\n            <div style=\"background: white; padding: 30px; border-radius: 20px; max-width: 500px; width: 90%; text-align: center;\">\n                <h2 id=\"gameCompleteTitle\" style=\"color: #333; margin-bottom: 20px;\">ğŸ‰ ã‚²ãƒ¼ãƒ çµ‚äº†ï¼</h2>\n                <div style=\"font-size: 1.5em; margin: 20px 0;\">\n                    <div style=\"color: #27ae60; margin: 10px 0;\">âœ… <span id=\"finalCorrectLabel\">æ­£è§£</span>: <span id=\"finalCorrect\">0</span><span id=\"finalQuestionsLabel1\">å•</span></div>\n                    <div style=\"color: #e74c3c; margin: 10px 0;\">âŒ <span id=\"finalWrongLabel\">ä¸æ­£è§£</span>: <span id=\"finalWrong\">0</span><span id=\"finalQuestionsLabel2\">å•</span></div>\n                    <div style=\"color: #f39c12; margin: 10px 0;\">â±ï¸ <span id=\"totalTimeLabel\">å®Œäº†æ™‚é–“</span>: <span id=\"totalTime\">0</span><span id=\"secondsLabel\">ç§’</span></div>\n                    <div style=\"font-size: 2em; font-weight: bold; color: #3498db; margin: 20px 0;\">\n                        <span id=\"finalRateLabel\">æ­£è§£ç‡</span>: <span id=\"finalRate\">0</span>%\n                    </div>\n                </div>\n                <div id=\"resultMessage\" style=\"font-size: 1.3em; font-weight: bold; margin: 20px 0;\"></div>\n                <button id=\"closeBtn\" onclick=\"closeResult()\" style=\"background: #3498db; color: white; border: none; padding: 15px 30px; font-size: 1.2em; border-radius: 25px; cursor: pointer; margin: 10px;\">é–‰ã˜ã‚‹</button>\n                <button id=\"playAgainBtn\" onclick=\"restartGame()\" style=\"background: #27ae60; color: white; border: none; padding: 15px 30px; font-size: 1.2em; border-radius: 25px; cursor: pointer; margin: 10px;\">ã‚‚ã†ä¸€åº¦</button>\n            </div>\n        </div>"
  },
  {
    "old_string": "        // ã‚²ãƒ¼ãƒ é–‹å§‹\n        function startGame() {\n            gameActive = true;\n            currentQuestionNumber = 0;\n            sessionCorrect = 0;\n            sessionWrong = 0;\n            \n            document.getElementById('startBtn').style.display = 'none';\n            document.getElementById('nextBtn').style.display = 'inline-block';\n            \n            nextQuestion();\n        }",
    "new_string": "        // è¨€èªåˆ‡ã‚Šæ›¿ãˆ\n        function switchLanguage(lang) {\n            currentLanguage = lang;\n            \n            // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°\n            document.querySelectorAll('.lang-btn').forEach(btn => {\n                btn.classList.remove('active');\n            });\n            event.target.classList.add('active');\n            \n            updateAllTexts();\n        }\n        \n        // å…¨ãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°\n        function updateAllTexts() {\n            const t = translations[currentLanguage];\n            \n            // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«\n            document.getElementById('pageTitle').textContent = t.title.replace('ğŸ—ï¸ ', '');\n            document.getElementById('title').textContent = t.title;\n            document.getElementById('instructions').innerHTML = t.instructions;\n            \n            // é›£æ˜“åº¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³\n            document.getElementById('difficultyTitle').textContent = t.difficultyTitle;\n            document.getElementById('easyBtn').textContent = t.easy;\n            document.getElementById('normalBtn').textContent = t.normal;\n            document.getElementById('hardBtn').textContent = t.hard;\n            document.getElementById('expertBtn').textContent = t.expert;\n            \n            // ã‚¿ã‚¤ãƒãƒ¼\n            document.getElementById('timerTitle').textContent = t.timerTitle;\n            \n            // ã‚¹ã‚³ã‚¢ãƒ©ãƒ™ãƒ«\n            document.getElementById('correctLabel').textContent = t.correct;\n            document.getElementById('wrongLabel').textContent = t.wrong;\n            document.getElementById('rateLabel').textContent = t.rate;\n            \n            // ãƒœã‚¿ãƒ³\n            document.getElementById('startBtn').textContent = t.startGame;\n            document.getElementById('nextBtn').textContent = t.nextQuestion;\n            document.getElementById('resetBtn').textContent = t.resetScore;\n            \n            // çµæœãƒ¢ãƒ¼ãƒ€ãƒ«\n            document.getElementById('gameCompleteTitle').textContent = t.gameComplete;\n            document.getElementById('finalCorrectLabel').textContent = t.correct;\n            document.getElementById('finalWrongLabel').textContent = t.wrong;\n            document.getElementById('totalTimeLabel').textContent = t.totalTime;\n            document.getElementById('secondsLabel').textContent = t.seconds;\n            document.getElementById('finalRateLabel').textContent = t.rate;\n            document.getElementById('finalQuestionsLabel1').textContent = t.questions;\n            document.getElementById('finalQuestionsLabel2').textContent = t.questions;\n            document.getElementById('closeBtn').textContent = t.close;\n            document.getElementById('playAgainBtn').textContent = t.playAgain;\n            \n            // é›£æ˜“åº¦æƒ…å ±\n            updateDifficultyInfo();\n            \n            // å•é¡Œãƒ†ã‚­ã‚¹ãƒˆï¼ˆã‚²ãƒ¼ãƒ ä¸­ã§ãªã„å ´åˆï¼‰\n            if (!gameActive) {\n                document.getElementById('question').textContent = t.question;\n            }\n        }\n        \n        // é›£æ˜“åº¦æƒ…å ±ã‚’æ›´æ–°\n        function updateDifficultyInfo() {\n            const t = translations[currentLanguage];\n            const infoMap = {\n                'easy': t.easyInfo,\n                'normal': t.normalInfo,\n                'hard': t.hardInfo,\n                'expert': t.expertInfo\n            };\n            document.getElementById('difficultyInfo').textContent = infoMap[currentDifficulty];\n        }\n        \n        // ã‚²ãƒ¼ãƒ é–‹å§‹\n        function startGame() {\n            gameActive = true;\n            currentQuestionNumber = 0;\n            sessionCorrect = 0;\n            sessionWrong = 0;\n            gameStartTime = Date.now();\n            \n            document.getElementById('startBtn').style.display = 'none';\n            document.getElementById('nextBtn').style.display = 'inline-block';\n            \n            nextQuestion();\n        }"
  },
  {
    "old_string": "            currentAnswer = { col: randomCol, row: randomRow };\n            \n            document.getElementById('question').textContent = `ã€Œ${randomCol}${randomRow}ã€ã¯ã©ã“ï¼Ÿ`;",
    "new_string": "            currentAnswer = { col: randomCol, row: randomRow };\n            \n            const t = translations[currentLanguage];\n            if (currentLanguage === 'ja') {\n                document.getElementById('question').textContent = `ã€Œ${randomCol}${randomRow}ã€${t.whereIs}`;\n            } else {\n                document.getElementById('question').textContent = `\"${randomCol}${randomRow}\"${t.whereIs}`;\n            }"
  },
  {
    "old_string": "        // çµæœè¡¨ç¤º\n        function showResult() {\n            gameActive = false;\n            isQuestionActive = false;\n            stopTimer();\n            \n            const rate = Math.round((sessionCorrect / totalQuestions) * 100);\n            \n            document.getElementById('finalCorrect').textContent = sessionCorrect;\n            document.getElementById('finalWrong').textContent = sessionWrong;\n            document.getElementById('finalRate').textContent = rate;\n            \n            // è©•ä¾¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n            let message = '';\n            if (rate === 100) {\n                message = 'ğŸ† ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆï¼ç´ æ™´ã‚‰ã—ã„ï¼';\n            } else if (rate >= 80) {\n                message = 'ğŸŒŸ ã™ã”ã„ï¼ã‚ˆãã§ãã¾ã—ãŸï¼';\n            } else if (rate >= 60) {\n                message = 'ğŸ‘ ã„ã„æ„Ÿã˜ã§ã™ï¼';\n            } else if (rate >= 40) {\n                message = 'ğŸ’ª ã‚‚ã†å°‘ã—ï¼é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼';\n            } else {\n                message = 'ğŸ“š ç·´ç¿’ã‚ã‚‹ã®ã¿ï¼';\n            }\n            document.getElementById('resultMessage').textContent = message;\n            \n            document.getElementById('resultModal').style.display = 'flex';\n        }",
    "new_string": "        // çµæœè¡¨ç¤º\n        function showResult() {\n            gameActive = false;\n            isQuestionActive = false;\n            stopTimer();\n            \n            // å®Œäº†æ™‚é–“ã‚’è¨ˆç®—\n            totalGameTime = Math.round((Date.now() - gameStartTime) / 1000);\n            \n            const rate = Math.round((sessionCorrect / totalQuestions) * 100);\n            const t = translations[currentLanguage];\n            \n            document.getElementById('finalCorrect').textContent = sessionCorrect;\n            document.getElementById('finalWrong').textContent = sessionWrong;\n            document.getElementById('totalTime').textContent = totalGameTime;\n            document.getElementById('finalRate').textContent = rate;\n            \n            // è©•ä¾¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n            let message = '';\n            if (rate === 100) {\n                message = t.perfect;\n            } else if (rate >= 80) {\n                message = t.great;\n            } else if (rate >= 60) {\n                message = t.good;\n            } else if (rate >= 40) {\n                message = t.notBad;\n            } else {\n                message = t.practice;\n            }\n            document.getElementById('resultMessage').textContent = message;\n            \n            document.getElementById('resultModal').style.display = 'flex';\n        }"
  },
  {
    "old_string": "        // çµæœã‚’é–‰ã˜ã‚‹\n        function closeResult() {\n            document.getElementById('resultModal').style.display = 'none';\n            document.getElementById('startBtn').style.display = 'inline-block';\n            document.getElementById('nextBtn').style.display = 'none';\n            document.getElementById('question').textContent = 'ã€Œã‚²ãƒ¼ãƒ é–‹å§‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦10å•ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼';\n            document.getElementById('questionCounter').textContent = '-- / 10';\n            clearPreviousAnswer();\n        }",
    "new_string": "        // çµæœã‚’é–‰ã˜ã‚‹\n        function closeResult() {\n            document.getElementById('resultModal').style.display = 'none';\n            document.getElementById('startBtn').style.display = 'inline-block';\n            document.getElementById('nextBtn').style.display = 'none';\n            const t = translations[currentLanguage];\n            document.getElementById('question').textContent = t.question;\n            document.getElementById('questionCounter').textContent = '-- / 10';\n            clearPreviousAnswer();\n        }"
  },
  {
    "old_string": "        // ã‚»ãƒ«ã‚¯ãƒªãƒƒã‚¯ã®å‡¦ç†\n        function handleCellClick(col, row, cellElement) {\n            if (!isQuestionActive) {\n                document.getElementById('message').innerHTML = \n                    '<span class=\"error\">ã¾ãšã€Œã‚²ãƒ¼ãƒ é–‹å§‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼</span>';\n                return;\n            }\n\n            stopTimer();\n            clearPreviousAnswer();\n\n            if (col === currentAnswer.col && row === currentAnswer.row) {\n                // æ­£è§£\n                cellElement.classList.add('correct');\n                correctCount++;\n                sessionCorrect++;\n                const difficulty = difficulties[currentDifficulty];\n                let message = 'ğŸ‰ æ­£è§£ã§ã™ï¼';\n                if (difficulty.timeLimit > 0) {\n                    const timeTaken = difficulty.timeLimit - timeRemaining;\n                    message += ` (${timeTaken}ç§’)`;\n                }\n                document.getElementById('message').innerHTML = \n                    '<span class=\"success\">' + message + '</span>';\n            } else {\n                // ä¸æ­£è§£\n                cellElement.classList.add('wrong');\n                wrongCount++;\n                sessionWrong++;\n                document.getElementById('message').innerHTML = \n                    '<span class=\"error\">âŒ ä¸æ­£è§£ã§ã™ã€‚æ­£è§£ã¯ã€Œ' + \n                    currentAnswer.col + currentAnswer.row + 'ã€ã§ã™ã€‚</span>';\n                \n                // æ­£è§£ã®ã‚»ãƒ«ã‚‚è¡¨ç¤º\n                const correctCell = document.querySelector(\n                    `[data-col=\"${currentAnswer.col}\"][data-row=\"${currentAnswer.row}\"]`\n                );\n                if (correctCell) {\n                    setTimeout(() => {\n                        correctCell.classList.add('correct');\n                    }, 500);\n                }\n            }\n\n            updateScore();\n            isQuestionActive = false;\n            \n            // æ¬¡ã®å•é¡Œãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–\n            if (gameActive) {\n                document.getElementById('nextBtn').disabled = false;\n                document.getElementById('nextBtn').style.opacity = '1';\n            }\n        }",
    "new_string": "        // ã‚»ãƒ«ã‚¯ãƒªãƒƒã‚¯ã®å‡¦ç†\n        function handleCellClick(col, row, cellElement) {\n            const t = translations[currentLanguage];\n            \n            if (!isQuestionActive) {\n                document.getElementById('message').innerHTML = \n                    '<span class=\"error\">' + t.startGameFirst + '</span>';\n                return;\n            }\n\n            stopTimer();\n            clearPreviousAnswer();\n\n            if (col === currentAnswer.col && row === currentAnswer.row) {\n                // æ­£è§£\n                cellElement.classList.add('correct');\n                correctCount++;\n                sessionCorrect++;\n                const difficulty = difficulties[currentDifficulty];\n                let message = t.correctAnswer;\n                if (difficulty.timeLimit > 0) {\n                    const timeTaken = difficulty.timeLimit - timeRemaining;\n                    message += ` (${timeTaken}${t.seconds})`;\n                }\n                document.getElementById('message').innerHTML = \n                    '<span class=\"success\">' + message + '</span>';\n            } else {\n                // ä¸æ­£è§£\n                cellElement.classList.add('wrong');\n                wrongCount++;\n                sessionWrong++;\n                \n                const wrongMsg = currentLanguage === 'ja' \n                    ? t.wrongAnswer + currentAnswer.col + currentAnswer.row + t.wrongAnswerEnd\n                    : t.wrongAnswer + currentAnswer.col + currentAnswer.row + t.wrongAnswerEnd;\n                \n                document.getElementById('message').innerHTML = \n                    '<span class=\"error\">' + wrongMsg + '</span>';\n                \n                // æ­£è§£ã®ã‚»ãƒ«ã‚‚è¡¨ç¤º\n                const correctCell = document.querySelector(\n                    `[data-col=\"${currentAnswer.col}\"][data-row=\"${currentAnswer.row}\"]`\n                );\n                if (correctCell) {\n                    setTimeout(() => {\n                        correctCell.classList.add('correct');\n                    }, 500);\n                }\n            }\n\n            updateScore();\n            isQuestionActive = false;\n            \n            // æ¬¡ã®å•é¡Œãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–\n            if (gameActive) {\n                document.getElementById('nextBtn').disabled = false;\n                document.getElementById('nextBtn').style.opacity = '1';\n            }\n        }"
  },
  {
    "old_string": "        function handleTimeUp() {\n            if (!isQuestionActive) return;\n            \n            wrongCount++;\n            sessionWrong++;\n            document.getElementById('message').innerHTML = \n                '<span class=\"error\">â° æ™‚é–“åˆ‡ã‚Œã§ã™ï¼æ­£è§£ã¯ã€Œ' + \n                currentAnswer.col + currentAnswer.row + 'ã€ã§ã—ãŸã€‚</span>';\n            \n            // æ­£è§£ã®ã‚»ãƒ«ã‚’è¡¨ç¤º\n            const correctCell = document.querySelector(\n                `[data-col=\"${currentAnswer.col}\"][data-row=\"${currentAnswer.row}\"]`\n            );\n            if (correctCell) {\n                correctCell.classList.add('correct');\n            }\n            \n            updateScore();\n            isQuestionActive = false;\n            \n            // æ¬¡ã®å•é¡Œãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–\n            if (gameActive) {\n                document.getElementById('nextBtn').disabled = false;\n                document.getElementById('nextBtn').style.opacity = '1';\n            }\n        }",
    "new_string": "        function handleTimeUp() {\n            if (!isQuestionActive) return;\n            \n            const t = translations[currentLanguage];\n            \n            wrongCount++;\n            sessionWrong++;\n            \n            const timeUpMsg = currentLanguage === 'ja'\n                ? t.timeUp + currentAnswer.col + currentAnswer.row + t.timeUpEnd\n                : t.timeUp + currentAnswer.col + currentAnswer.row + t.timeUpEnd;\n            \n            document.getElementById('message').innerHTML = \n                '<span class=\"error\">' + timeUpMsg + '</span>';\n            \n            // æ­£è§£ã®ã‚»ãƒ«ã‚’è¡¨ç¤º\n            const correctCell = document.querySelector(\n                `[data-col=\"${currentAnswer.col}\"][data-row=\"${currentAnswer.row}\"]`\n            );\n            if (correctCell) {\n                correctCell.classList.add('correct');\n            }\n            \n            updateScore();\n            isQuestionActive = false;\n            \n            // æ¬¡ã®å•é¡Œãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–\n            if (gameActive) {\n                document.getElementById('nextBtn').disabled = false;\n                document.getElementById('nextBtn').style.opacity = '1';\n            }\n        }"
  },
  {
    "old_string": "        // é›£æ˜“åº¦è¨­å®š\n        function setDifficulty(level) {\n            // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒœã‚¿ãƒ³ã®æ›´æ–°\n            document.querySelectorAll('.difficulty-btn').forEach(btn => {\n                btn.classList.remove('active');\n            });\n            event.target.classList.add('active');\n            \n            currentDifficulty = level;\n            const difficulty = difficulties[level];\n            \n            // é›£æ˜“åº¦æƒ…å ±ã®æ›´æ–°\n            document.getElementById('difficultyInfo').textContent = difficulty.info;\n            \n            // ã‚²ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ\n            resetScore();\n            createGrid();\n        }",
    "new_string": "        // é›£æ˜“åº¦è¨­å®š\n        function setDifficulty(level) {\n            // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒœã‚¿ãƒ³ã®æ›´æ–°\n            document.querySelectorAll('.difficulty-btn').forEach(btn => {\n                btn.classList.remove('active');\n            });\n            event.target.classList.add('active');\n            \n            currentDifficulty = level;\n            \n            // é›£æ˜“åº¦æƒ…å ±ã®æ›´æ–°\n            updateDifficultyInfo();\n            \n            // ã‚²ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ\n            resetScore();\n            createGrid();\n        }"
  },
  {
    "old_string": "        // ã‚¹ã‚³ã‚¢ãƒªã‚»ãƒƒãƒˆ\n        function resetScore() {\n            correctCount = 0;\n            wrongCount = 0;\n            isQuestionActive = false;\n            gameActive = false;\n            currentQuestionNumber = 0;\n            sessionCorrect = 0;\n            sessionWrong = 0;\n            stopTimer();\n            updateScore();\n            clearPreviousAnswer();\n            document.getElementById('question').textContent = 'ã€Œã‚²ãƒ¼ãƒ é–‹å§‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦10å•ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼';\n            document.getElementById('message').textContent = '';\n            document.getElementById('questionCounter').textContent = '-- / 10';\n            document.getElementById('startBtn').style.display = 'inline-block';\n            document.getElementById('nextBtn').style.display = 'none';\n            \n            // ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤ºãƒªã‚»ãƒƒãƒˆ\n            const timerElement = document.getElementById('timer');\n            timerElement.textContent = '--:--';\n            timerElement.className = 'timer-display';\n        }",
    "new_string": "        // ã‚¹ã‚³ã‚¢ãƒªã‚»ãƒƒãƒˆ\n        function resetScore() {\n            correctCount = 0;\n            wrongCount = 0;\n            isQuestionActive = false;\n            gameActive = false;\n            currentQuestionNumber = 0;\n            sessionCorrect = 0;\n            sessionWrong = 0;\n            gameStartTime = 0;\n            totalGameTime = 0;\n            stopTimer();\n            updateScore();\n            clearPreviousAnswer();\n            \n            const t = translations[currentLanguage];\n            document.getElementById('question').textContent = t.question;\n            document.getElementById('message').textContent = '';\n            document.getElementById('questionCounter').textContent = '-- / 10';\n            document.getElementById('startBtn').style.display = 'inline-block';\n            document.getElementById('nextBtn').style.display = 'none';\n            \n            // ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤ºãƒªã‚»ãƒƒãƒˆ\n            const timerElement = document.getElementById('timer');\n            timerElement.textContent = '--:--';\n            timerElement.className = 'timer-display';\n        }"
  }
]
